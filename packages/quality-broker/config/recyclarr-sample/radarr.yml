# yaml-language-server: $schema=https://raw.githubusercontent.com/recyclarr/recyclarr/master/schemas/config-schema.json
# ============================================================
# Radarr Configuration – Movie Quality Policy
# ============================================================
#
# Copy this file to data/recyclarr/config/configs/radarr.yml
#
# Philosophy:
# - Size-based rejection (Remux/HDTV blocked via tiny size caps)
# - Streaming service scoring (ATVP > AMZN/NF > others)
# - Release group tiers (WEB Tier 01/02/03, UHD Bluray Tiers)
# - Light LQ penalty (allows YTS fallback when nothing else available)
# - Custom size limits (not TRaSH defaults)
#
# ============================================================

radarr:
  radarr_main:
    base_url: !secret radarr_url
    api_key: !secret radarr_api_key

    # Include quality profiles from separate file
    # Note: When deploying, move includes/ to be a sibling of configs/ (Recyclarr v8.0+)
    # Production path: ../includes/radarr-quality-profiles.yml
    include:
      - config: ../includes/radarr-quality-profiles.yml

    # ------------------------------------------------------
    # Quality definitions (MB per minute)
    # For 120min movie: max × 120 = max file size in MB
    # ------------------------------------------------------
    quality_definition:
      type: movie
      qualities:
        # Blocked (deterministic reject)
        - { name: HDTV-720p,   min: 0,  preferred: 1,   max: 1 }
        - { name: HDTV-1080p,  min: 0,  preferred: 1,   max: 1 }
        - { name: HDTV-2160p,  min: 0,  preferred: 1,   max: 1 }
        - { name: Remux-1080p, min: 0,  preferred: 1,   max: 1 }
        - { name: Remux-2160p, min: 0,  preferred: 1,   max: 1 }

        # 720p (fallback)
        - { name: WEBDL-720p,   min: 6,  preferred: 12,  max: 22 }
        - { name: WEBRip-720p,  min: 5,  preferred: 10,  max: 20 }
        - { name: Bluray-720p,  min: 10, preferred: 18,  max: 32 }

        # 1080p (4-7 GB typical for quality WEB-DLs)
        - { name: WEBDL-1080p,  min: 12, preferred: 30,  max: 55 }
        - { name: WEBRip-1080p, min: 8,  preferred: 22,  max: 45 }
        - { name: Bluray-1080p, min: 18, preferred: 40,  max: 75 }

        # 2160p (15-20GB max for HQ4K)
        - { name: WEBDL-2160p,  min: 25, preferred: 70,  max: 130 }
        - { name: WEBRip-2160p, min: 20, preferred: 55,  max: 110 }
        - { name: Bluray-2160p, min: 45, preferred: 100, max: 170 }

    # ------------------------------------------------------
    # Custom Formats
    # ------------------------------------------------------
    custom_formats:
      # Video encode quality
      - trash_ids:
          - a5d148168c4506b55cf53984107c396e # 10bit
        assign_scores_to:
          - { name: HD, score: 30 }
          - { name: Efficient-4K, score: 35 }
          - { name: HighQuality-4K, score: 40 }

      - trash_ids:
          - 9170d55c319f4fe40da8711ba9d8050d # x265
        assign_scores_to:
          - { name: HD, score: 25 }
          - { name: Efficient-4K, score: 30 }
          - { name: HighQuality-4K, score: 30 }

      - trash_ids:
          - 2899d84dc9372de3408e6d8cc18e9666 # x264
        assign_scores_to:
          - { name: HD, score: -10 }
          - { name: Efficient-4K, score: -25 }
          - { name: HighQuality-4K, score: -30 }

      # HDR / DV
      - trash_ids:
          - 493b6d1dbec3c3364c59d7607f7e3405 # HDR (unified)
          - b337d6812e06c200ec9a2d3cfa9d20a7 # DV Boost
          - caa37d0df9c348912df1fb1d88f9273a # HDR10+ Boost
          - 9c38ebb7384dada637be8899efa68e6f # SDR
        assign_scores_to:
          - { name: HD, score: 20 }
          - { name: Efficient-4K, score: 30 }
          - { name: HighQuality-4K, score: 35 }

      # Audio
      - trash_ids:
          - 496f355514737f7d83bf7aa4d24f8169 # TrueHD ATMOS
        assign_scores_to:
          - { name: HD, score: 25 }
          - { name: Efficient-4K, score: 25 }
          - { name: HighQuality-4K, score: 25 }

      - trash_ids:
          - 1af239278386be2919e1bcee0bde047e # DD+ ATMOS
        assign_scores_to:
          - { name: HD, score: 15 }
          - { name: Efficient-4K, score: 15 }
          - { name: HighQuality-4K, score: 15 }

      - trash_ids:
          - 185f1dd7264c4562b9022d963ac37424 # DD+
        assign_scores_to:
          - { name: HD, score: 8 }
          - { name: Efficient-4K, score: 8 }
          - { name: HighQuality-4K, score: 8 }

      - trash_ids:
          - dcf3ec6938fa32445f590a4da84256cd # DTS-HD MA
        assign_scores_to:
          - { name: HD, score: 15 }
          - { name: Efficient-4K, score: 15 }
          - { name: HighQuality-4K, score: 15 }

      - trash_ids:
          - 8e109e50e0a0b83a5098b056e13bf6db # DTS-HD HRA
        assign_scores_to:
          - { name: HD, score: 15 }
          - { name: Efficient-4K, score: 15 }
          - { name: HighQuality-4K, score: 15 }

      # Release hygiene
      - trash_ids:
          - e7718d7a3ce595f289bfee26adc178f5 # Repack/Proper
        assign_scores_to:
          - { name: HD, score: 50 }
          - { name: Efficient-4K, score: 50 }
          - { name: HighQuality-4K, score: 50 }

      - trash_ids:
          - ae43b294509409a6a13919dedd4764c4 # Repack2
        assign_scores_to:
          - { name: HD, score: 6 }
          - { name: Efficient-4K, score: 6 }
          - { name: HighQuality-4K, score: 6 }

      - trash_ids:
          - 5caaaa1c08c1742aa4342d8c4cc463f2 # Repack3
        assign_scores_to:
          - { name: HD, score: 7 }
          - { name: Efficient-4K, score: 7 }
          - { name: HighQuality-4K, score: 7 }

      # Scene releases (blocked per TRaSH recommendation)
      - trash_ids:
          - f537cf427b64c38c8e36298f657e4828 # Scene
        assign_scores_to:
          - { name: HD, score: -10000 }
          - { name: Efficient-4K, score: -10000 }
          - { name: HighQuality-4K, score: -10000 }

      # ------------------------------------------------------
      # Streaming Services (tiered by quality reputation)
      # ------------------------------------------------------
      # Tier 1: Highest quality (Apple TV+ - best bitrates)
      - trash_ids:
          - 40e9380490e748672c2522eaaeb692f7 # ATVP (Apple TV+)
        assign_scores_to:
          - { name: HD, score: 25 }
          - { name: Efficient-4K, score: 30 }
          - { name: HighQuality-4K, score: 35 }

      # Tier 2: Premium quality
      - trash_ids:
          - b3b3a6ac74ecbd56bcdbefa4799fb9df # AMZN
          - 2a6039655313bf5dab1e43523b62c374 # MA (Movies Anywhere)
          - 84272245b2988854bfb76a16e60baea5 # DSNP (Disney+)
          - 5763d1b0ce84aff3b21038eea8e9b8ad # HMAX (HBO Max)
          - 170b1d363bd8516fbf3a3eb05d4faff6 # NF (Netflix)
        assign_scores_to:
          - { name: HD, score: 18 }
          - { name: Efficient-4K, score: 22 }
          - { name: HighQuality-4K, score: 25 }

      # Tier 3: Good quality
      - trash_ids:
          - e36a0ba1bc902b26ee40818a1d59b8bd # PMTP (Paramount+)
          - c9fd353f8f5f1baf56dc601c4cb29920 # PCOK (Peacock)
          - e0ec9672be6cac914ffad34a6b077209 # iT (iTunes)
          - 526d445d4c16214309f0fd2b3be18a89 # Hulu
          - f6ff65b3f4b464a79dcc75950fe20382 # CRAV
          - c2863d2a50c9acad1fb50e53ece60817 # STAN
        assign_scores_to:
          - { name: HD, score: 12 }
          - { name: Efficient-4K, score: 15 }
          - { name: HighQuality-4K, score: 18 }

      # ------------------------------------------------------
      # Release Groups - WEB Tiers (TRaSH defaults)
      # ------------------------------------------------------
      - trash_ids:
          - c20f169ef63c5f40c2def54abaf4438e # WEB Tier 01
        assign_scores_to:
          - name: HD
          - name: Efficient-4K
          - name: HighQuality-4K

      - trash_ids:
          - 403816d65392c79236dcb6dd591aeda4 # WEB Tier 02
        assign_scores_to:
          - name: HD
          - name: Efficient-4K
          - name: HighQuality-4K

      - trash_ids:
          - af94e0fe497124d1f9ce732069ec8c3b # WEB Tier 03
        assign_scores_to:
          - name: HD
          - name: Efficient-4K
          - name: HighQuality-4K

      # ------------------------------------------------------
      # Release Groups - UHD Bluray Tiers (TRaSH defaults, HQ4K only)
      # ------------------------------------------------------
      - trash_ids:
          - 4d74ac4c4db0b64bff6ce0cffef99bf0 # UHD Bluray Tier 01
        assign_scores_to:
          - name: HighQuality-4K

      - trash_ids:
          - a58f517a70193f8e578056642178419d # UHD Bluray Tier 02
        assign_scores_to:
          - name: HighQuality-4K

      - trash_ids:
          - e71939fae578037e7aed3ee219bbe7c1 # UHD Bluray Tier 03
        assign_scores_to:
          - name: HighQuality-4K

      # ------------------------------------------------------
      # Release Groups - HD Bluray Tiers (TRaSH defaults, HD only)
      # ------------------------------------------------------
      - trash_ids:
          - ed27ebfef2f323e964fb1f61391bcb35 # HD Bluray Tier 01
        assign_scores_to:
          - name: HD

      - trash_ids:
          - c20c8647f2746a1f4c4262b0fbbeeeae # HD Bluray Tier 02
        assign_scores_to:
          - name: HD

      - trash_ids:
          - 5608c71bcebba0a5e666223bae8c9227 # HD Bluray Tier 03
        assign_scores_to:
          - name: HD

      # Remux penalty (blocked by size, CF is safety net)
      - trash_ids:
          - 3a3ff47579026e76d6504ebea39390de # Remux Tier 01
          - 9f98181fe5a3fbeb0cc29340da2a468a # Remux Tier 02
          - 8baaf0b3142bf4d94c42a724f034e27a # Remux Tier 03
        assign_scores_to:
          - { name: HD, score: -1000 }
          - { name: Efficient-4K, score: -1000 }
          - { name: HighQuality-4K, score: -1000 }

      # LQ penalties (light - allows YTS/compact group fallback)
      - trash_ids:
          - 90a6f9a284dff5103f6346090e6280c8 # LQ
        assign_scores_to:
          - { name: HD, score: -10 }
          - { name: Efficient-4K, score: 0 }
          - { name: HighQuality-4K, score: -15 }

      - trash_ids:
          - e204b80c87be9497a8a6eaff48f72905 # LQ (Release Title)
        assign_scores_to:
          - { name: HD, score: -10 }
          - { name: Efficient-4K, score: 0 }
          - { name: HighQuality-4K, score: -15 }

      # German (neutral)
      - trash_ids:
          - 86bc3115eb4e9873ac96904a4a68e19e # German
          - f845be10da4f442654c13e1f2c3d6cd5 # German DL
        assign_scores_to:
          - { name: HD, score: 0 }
          - { name: Efficient-4K, score: 0 }
          - { name: HighQuality-4K, score: 0 }

#!/usr/bin/env bash
# Start the Radarr/Sonarr MCP server.
# Sources the project .env for API keys regardless of working directory.
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_ROOT="$(dirname "$SCRIPT_DIR")"
ENV_FILE="$PROJECT_ROOT/.env"

if [[ -f "$ENV_FILE" ]]; then
  set -a
  # shellcheck source=/dev/null
  source "$ENV_FILE"
  set +a
fi

# NAS_IP must be localhost: MCP runs on the host and connects via host-exposed ports.
export NAS_IP="localhost"

exec "$HOME/.local/share/dulce-jelly-mcp/bin/python" -m radarr_sonarr_mcp.server

# Example Recyclarr config fragment to provision Radarr profiles used by quality-broker.
# Copy/merge into your live data/recyclarr/config/recyclarr.yml

radarr:
  radarr_main:
    base_url: ${RADARR_URL:-http://radarr:7878}
    api_key: ${RADARR_API_KEY}

    # Reuse your existing quality_definition block (remux blocked, size caps enforced).

    quality_profiles:
      - name: AutoAssignQuality
        reset_unmatched_scores:
          enabled: true
        upgrade:
          allowed: false
        quality_sort: top
        qualities:
          - name: Remux-2160p
            enabled: false
          - name: Remux-1080p
            enabled: false
          - name: HDTV-2160p
            enabled: false
          - name: HDTV-1080p
            enabled: false
          - name: HDTV-720p
            enabled: false
          - name: WEB 1080p
            qualities:
              - WEBRip-1080p
              - WEBDL-1080p
          - name: Bluray-1080p
            enabled: true

      - name: HD
        reset_unmatched_scores:
          enabled: true
        upgrade:
          allowed: false
        quality_sort: top
        qualities:
          - name: Remux-2160p
            enabled: false
          - name: Remux-1080p
            enabled: false
          - name: HDTV-2160p
            enabled: false
          - name: HDTV-1080p
            enabled: false
          - name: HDTV-720p
            enabled: false
          - name: WEB 1080p
            qualities:
              - WEBRip-1080p
              - WEBDL-1080p
          - name: Bluray-1080p
            enabled: true

      - name: Efficient-4K
        reset_unmatched_scores:
          enabled: true
        upgrade:
          allowed: true
          until_quality: WEB 2160p
          until_score: 55
        min_format_score: 20
        min_upgrade_format_score: 40
        quality_sort: top
        qualities:
          - name: Remux-2160p
            enabled: false
          - name: Remux-1080p
            enabled: false
          - name: HDTV-2160p
            enabled: false
          - name: HDTV-1080p
            enabled: false
          - name: WEB 2160p
            qualities:
              - WEBRip-2160p
              - WEBDL-2160p
          - name: Bluray-2160p
            enabled: false
          - name: WEB 1080p
            enabled: false
            qualities:
              - WEBRip-1080p
              - WEBDL-1080p

      - name: HighQuality-4K
        reset_unmatched_scores:
          enabled: true
        upgrade:
          allowed: true
          until_quality: WEB 2160p
          until_score: 80
        min_format_score: 40
        min_upgrade_format_score: 70
        quality_sort: top
        qualities:
          - name: Remux-2160p
            enabled: false
          - name: Remux-1080p
            enabled: false
          - name: HDTV-2160p
            enabled: false
          - name: HDTV-1080p
            enabled: false
          - name: WEB 2160p
            qualities:
              - WEBRip-2160p
              - WEBDL-2160p
          - name: Bluray-2160p
            enabled: true

    custom_formats:
      # Encode quality
      - trash_ids:
          - a5d148168c4506b55cf53984107c396e # 10bit
        assign_scores_to:
          - name: HD
            score: 30
          - name: Efficient-4K
            score: 35
          - name: HighQuality-4K
            score: 40

      - trash_ids:
          - 9170d55c319f4fe40da8711ba9d8050d # x265/HEVC
        assign_scores_to:
          - name: HD
            score: 25
          - name: Efficient-4K
            score: 30
          - name: HighQuality-4K
            score: 30

      - trash_ids:
          - 2899d84dc9372de3408e6d8cc18e9666 # x264
        assign_scores_to:
          - name: HD
            score: -10
          - name: Efficient-4K
            score: -25
          - name: HighQuality-4K
            score: -30

      # HDR / DV
      - trash_ids:
          - 493b6d1dbec3c3364c59d7607f7e3405 # HDR
        assign_scores_to:
          - name: HD
            score: 20
          - name: Efficient-4K
            score: 30
          - name: HighQuality-4K
            score: 35

      - trash_ids:
          - b337d6812e06c200ec9a2d3cfa9d20a7 # DV Boost
        assign_scores_to:
          - name: HD
            score: 10
          - name: Efficient-4K
            score: 20
          - name: HighQuality-4K
            score: 30

      - trash_ids:
          - 9c38ebb7384dada637be8899efa68e6f # SDR
        assign_scores_to:
          - name: HD
            score: -25
          - name: Efficient-4K
            score: -40
          - name: HighQuality-4K
            score: -50

      # Source preferences
      - trash_ids:
          - 9f6f5d9e439e2f3ed3f5f9895e7e5a7a # WEB-DL
          - 7f0dd179a7c68ec1a5a2b9d09e6fdabb # WEBRip
        assign_scores_to:
          - name: HD
            score: 10
          - name: Efficient-4K
            score: 20
          - name: HighQuality-4K
            score: 15

      - trash_ids:
          - e20e28ce8ccf1d0b7865df0e6155c32f # BluRay
        assign_scores_to:
          - name: HD
            score: 5
          - name: Efficient-4K
            score: 0
          - name: HighQuality-4K
            score: 20

      # Release group preferences
      - trash_ids:
          - c0c93c3c9a64a34bde3a533f5f6c1f4d # FLUX/FraMeSToR/Hallowed (trusted UHD groups)
        assign_scores_to:
          - name: Efficient-4K
            score: 10
          - name: HighQuality-4K
            score: 30

      - trash_ids:
          - 3b8d565418631b56cfe29dd355e5e0ba # YTS
        assign_scores_to:
          - name: Efficient-4K
            score: -10
          - name: HighQuality-4K
            score: -100

      # Audio considerations
      - trash_ids:
          - 2f0d24a5f397dab1608b0e6b1a24c9c4 # Atmos/TrueHD
        assign_scores_to:
          - name: HighQuality-4K
            score: 20

      - trash_ids:
          - 5e82a8f8df78b76401938f6185c4c4cf # DTS-HD MA / HR
        assign_scores_to:
          - name: HighQuality-4K
            score: 10

      - trash_ids:
          - 58d72a8e5a8e5d0ab70c3d48864b0c2b # DD+/AAC low-tier
        assign_scores_to:
          - name: HighQuality-4K
            score: -10

# Curatarr Configuration Example
# Copy to config.yaml and configure your settings
#
# SECRETS:
# API keys should be stored in secrets.yaml (see secrets.example.yaml)
# The secrets file is automatically loaded and merged with this config
#
# Environment variables can be used with ${VAR_NAME} syntax

# Library paths to manage
library:
  moviePaths:
    - /media/movies
    # - /media/movies-4k
  tvPaths: []  # TV support coming in future phase

# Newznab-compatible indexer (replaces Prowlarr)
# API key loaded from secrets.yaml
indexer:
  url: https://api.nzbgeek.info  # or your indexer
  categories:
    movies: [2000, 2010, 2020, 2030, 2040, 2045, 2050, 2060]
    tv: [5000, 5020, 5030, 5040, 5045, 5050, 5060]

# SABnzbd download client
# API key loaded from secrets.yaml
sabnzbd:
  url: http://localhost:8080
  category: movies

# TMDB for movie metadata (used in LLM verification)
# API key loaded from secrets.yaml
tmdb: {}

# Jellyfin integration (optional)
# API key loaded from secrets.yaml
jellyfin:
  url: http://localhost:8096

# LLM configuration for content verification
# API key loaded from secrets.yaml
llm:
  provider: openai  # or anthropic
  model: gpt-4o
  temperature: 0.1
  maxTokens: 1024

# Quality profiles (TRaSH-based defaults)
profiles:
  - name: HD
    resolution: 1080p
    minBitrate: 4000
    maxBitrate: 15000
    preferredBitrate: 8000
    minSize: 8      # MB per minute
    maxSize: 75
    preferredSize: 30
    allowedCodecs: [x264, x265, hevc]
    allowedSources: [bluray, webdl, webrip]
    blockedGroups: []
    preferHdr: false

  - name: Efficient-4K
    resolution: 2160p
    minBitrate: 8000
    maxBitrate: 40000
    preferredBitrate: 20000
    minSize: 20
    maxSize: 130
    preferredSize: 70
    allowedCodecs: [x265, hevc, av1]
    allowedSources: [webdl, webrip]
    blockedGroups: []
    preferHdr: true

  - name: HighQuality-4K
    resolution: 2160p
    minBitrate: 20000
    maxBitrate: 80000
    preferredBitrate: 45000
    minSize: 45
    maxSize: 170
    preferredSize: 100
    allowedCodecs: [x265, hevc, av1]
    allowedSources: [bluray, webdl]
    blockedGroups: []
    preferHdr: true

# Cache settings
cache:
  dbPath: ./data/curatarr.sqlite
  searchTtlHours: 24
  maxEntries: 50000

# Release group reputation (affects scoring)
groupReputation:
  tier1:  # Premium P2P (+15 score)
    - BHDStudio
    - DON
    - FraMeSToR
    - HiFi
    - playBD
    - FLUX
    - TEPES
    - HONE
  tier2:  # Reliable (+5 score)
    - SPARKS
    - GECKOS
    - NTb
    - CMRG
    - SiGMA
  tier3:  # Acceptable (0 score)
    - YTS
    - YIFY
    - RARBG
    - EVO
  blocked:  # Hard reject (-1000)
    - aXXo
    - KLAXXON
    - MeGusta

# Rate limiting - prevents runaway upgrades
rateLimits:
  movies:
    maxPerDay: 10           # Max movie upgrades per 24h
    maxPerHour: 3           # Max movie upgrades per hour
    cooldownMinutes: 30     # Min time between upgrades

  episodes:
    maxPerDay: 50           # Max episode upgrades per 24h
    maxPerHour: 10          # Max episode upgrades per hour
    cooldownMinutes: 5      # Min time between upgrades

  global:
    maxConcurrent: 2        # Max concurrent downloads
    pauseOnDiskSpaceMB: 50000  # Pause if <50GB free

# Recycle bin - soft delete instead of permanent
recycleBin:
  enabled: true
  path: /media/.curatarr-recycle
  retentionDays: 30         # Auto-purge after 30 days
  maxSizeGB: 500            # Max recycle bin size

  # ⚠️ DANGEROUS: Enable only if you understand the risk
  # When true, allows permanent deletion from UI/CLI
  # Deleted files CANNOT be recovered
  allowPermanentDelete: false

# Automatic upgrade polling
upgradePolling:
  enabled: false            # Disabled by default
  schedule: "0 3 * * *"     # 3 AM daily (cron)
  batchSize: 50             # Items to evaluate per run
  minAgeHours: 48           # Don't upgrade files < 48h old
  requireConfirmation: true # Require human approval
